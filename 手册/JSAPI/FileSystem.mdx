# FileSystem

<blockquote>
  使用 FS 对象实现文件操作。 Yao 提供 System, DSL, Script 三个空间, System
  用于应用数据操作, DSL 用于DSL文件操作, Script 用于脚本文件操作; DSL 和 Script
  只能用于 stuido 脚本。
</blockquote>

**约定**

1. 示例中约定应用根目录为 `/data/app`, 实际编写时需替换为应用根目录。
2. 使用 `<>` 标识自行替换的内容。 例如: `icon-<图标名称>`, 实际编写时应替换为: `icon-foo`, `icon-bar` ...

| 空间    | 根目录            | 说明                                          |
| ------- | ----------------- | --------------------------------------------- |
| system  | /data/app/data    | 应用数据                                      |
| dsl     | /data/app         | 除 `scripts` 外的所有目录(仅 Studio 脚本可用) |
| scripts | /data/app/scirpts | 脚本目录(仅 Studio 脚本可用)                  |

**示例**

**System**

`/data/app/scripts/test.js`

```javascript
function ReadFile() {
  let fs = new FS("system");
  let data = fs.ReadFile("/f1.txt"); // /data/app/data/f1.txt
  return data;
}

function WriteFile() {
  let fs = new FS("system");
  let length = fs.WriteFile("/f2.txt", "hello", 0644); // /data/app/data/f2.txt
  return length;
}
```

**DSL**

`/data/app/studio/test.js`

```javascript
function ReadFile() {
  let fs = new FS("dsl");
  let data = fs.ReadFile("/models/f1.mod.json"); // /data/app/models/f1.mod.json
  return data;
}

function WriteFile() {
  let fs = new FS("dsl");
  let data = {
    name: "用户",
    table: { name: "f1" },
    columns: [{ label: "ID", name: "id", type: "ID" }],
  };
  let length = fs.WriteFile("/models/f2.mod.json", data, 0644); //  /data/app/models/f2.mod.json
  return length;
}
```

**Script**

```javascript
function ReadFile() {
  let fs = new FS("script");
  let data = fs.ReadFile("/f1.js"); // /data/app/scripts/f1.js
  return data;
}

function WriteFile() {
  let fs = new FS("script");
  let script = `
    function Foo() {
      return "Bar"
    }
  `;
  let length = fs.WriteFile("/models/f2.js", script, 0644); // /data/app/scripts/f2.js
  return length;
}
```

## API

```javascript
let fs = new FS("system");
let dataString = fs.ReadFile("/name.file");
let dataUnit8Array = fs.ReadFileBuffer("/name.file");
let length = fs.WriteFile("/name.file", "Hello");
let length = fs.WriteFile("/name.file", "Hello", 0644);
let length = fs.WriteFileBuffer("/name.file", dataUnit8Array);
let length = fs.WriteFileBuffer("/name.file", dataUnit8Array, 0644);
let dirs = fs.ReadDir("");
let dirs = fs.ReadDir("", true); // recursive
let err = fs.Mkdir("");
let err = fs.Mkdir("", 0644);
let err = fs.MkdirAll("/dir");
let err = fs.MkdirAll("/dir", 0644);
let temp = fs.MkdirTemp();
let temp = fs.MkdirTemp("/dir");
let temp = fs.MkdirTemp("/dir", "*-logs");
let ok = fs.Exists("");
let ok = fs.IsDir("");
let ok = fs.IsFile("");
let ok = fs.Remove("");
let ok = fs.RemoveAll("");
let err = fs.Chmod("", 0755);
let res = fs.BaseName("/name.file");
let res = fs.DirName("/name.file");
let res = fs.ExtName("/name.file");
let res = fs.MimeType("/name.file");
let res = fs.Mode("/name.file");
let res = fs.Size("/name.file");
let res = fs.ModTime("/name.file");
let res = fs.Copy("/foo.file", "/bar.file");
let res = fs.Copy("", "/root/new");
let res = fs.Move("/foo.file", "/bar.file");
let res = fs.Move("", "/root/new");
```
